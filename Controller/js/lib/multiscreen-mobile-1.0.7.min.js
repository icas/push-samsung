!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.e=function(t,e){e.call(null,this)},e.modules=t,e.cache=n,e(0)}({c:"libs/",0:function(t,e,n){t.exports={Device:n(40),version:"1.0.7"},window&&(window.webapis=window.webapis||{},window.webapis.multiscreen=window.webapis.multiscreen||t.exports)},1:function(t,e,n){function r(t){if(t instanceof Date)return!0;if("object"!=typeof t)return!1;var e=Date.prototype&&u(Date.prototype),n=t.__proto__&&u(t.__proto__);return JSON.stringify(n)===JSON.stringify(e)}var i=(n(12),n(16)),o=n(35),u=n(34),a=n(33),s=n(32);e.isArray=i,e.isDate=r,e.isRegExp=s,e.print=function(){},e.puts=function(){},e.debug=function(){},e.inspect=function(t,n,a,c){function l(t,a){if(t&&"function"==typeof t.inspect&&t!==e&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(a);switch(typeof t){case"undefined":return p("undefined","undefined");case"string":var c="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return p(c,"string");case"number":return p(""+t,"number");case"boolean":return p(""+t,"boolean")}if(null===t)return p("null","null");var h=o(t),d=n?u(t):h;if("function"==typeof t&&0===d.length){if(s(t))return p(""+t,"regexp");var g=t.name?": "+t.name:"";return p("[Function"+g+"]","special")}if(r(t)&&0===d.length)return p(t.toUTCString(),"date");var v,y,m;if(i(t)?(y="Array",m=["[","]"]):(y="Object",m=["{","}"]),"function"==typeof t){var E=t.name?": "+t.name:"";v=s(t)?" "+t:" [Function"+E+"]"}else v="";if(r(t)&&(v=" "+t.toUTCString()),0===d.length)return m[0]+v+m[1];if(0>a)return s(t)?p(""+t,"regexp"):p("[Object]","special");f.push(t);var _=d.map(function(e){var n,r;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?r=t.__lookupSetter__(e)?p("[Getter/Setter]","special"):p("[Getter]","special"):t.__lookupSetter__(e)&&(r=p("[Setter]","special"))),h.indexOf(e)<0&&(n="["+e+"]"),r||(f.indexOf(t[e])<0?(r=null===a?l(t[e]):l(t[e],a-1),r.indexOf("\n")>-1&&(r=i(t)?r.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+r.split("\n").map(function(t){return"   "+t}).join("\n"))):r=p("[Circular]","special")),"undefined"==typeof n){if("Array"===y&&e.match(/^\d+$/))return r;n=JSON.stringify(""+e),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=p(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=p(n,"string"))}return n+": "+r});f.pop();var R=0,O=_.reduce(function(t,e){return R++,e.indexOf("\n")>=0&&R++,t+e.length+1},0);return _=O>50?m[0]+(""===v?"":v+"\n ")+" "+_.join(",\n  ")+" "+m[1]:m[0]+v+" "+_.join(", ")+" "+m[1]}var f=[],p=function(t,e){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+n[r][0]+"m"+t+"["+n[r][1]+"m":t};return c||(p=function(t){return t}),l(t,"undefined"==typeof a?2:a)};e.log=function(){},e.pump=null,e.inherits=function(t,e){t.super_=e,t.prototype=a(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var c=/%[sdj%]/g;e.format=function(t){if("string"!=typeof t){for(var n=[],r=0;r<arguments.length;r++)n.push(e.inspect(arguments[r]));return n.join(" ")}for(var r=1,i=arguments,o=i.length,u=String(t).replace(c,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return t}}),a=i[r];o>r;a=i[++r])u+=null===a||"object"!=typeof a?" "+a:" "+e.inspect(a);return u}},2:function(t,e,n){t.exports={events:{EventEmitter:n(10)},data:{Collection:n(24)},connections:{WebSocketConnection:n(23)},errors:{MultiScreenError:n(25)},rpc:{JSONMessage:n(26),JSONSerializable:n(8),JSONMessageError:n(27),JSONMessageResult:n(28)},utils:{UUID:n(11)},vendor:{underscore:n(11)}}},3:function(t,e,n){t.exports=n(21)},4:function(t){var e={loggingEnabled:!0,consoleLoggingEnabled:!0,consoleLoggingLevel:"debug",serverPort:8001,apiVersion:"1.0",apiNamespace:"ms",apiCapability:"samsung:multiscreen:1",cloudServiceURL:"https://multiscreen.samsung.com",cloudDiscoveryPath:"/discovery/reservations",cloudLaunchPath:"/apps/launch/"};t.exports=e},5:function(t,e){(function(){var n=this,r=n._,i={},o=Array.prototype,u=Object.prototype,a=Function.prototype,s=o.push,c=o.slice,l=o.concat,f=u.toString,p=u.hasOwnProperty,h=o.forEach,d=o.map,g=o.reduce,v=o.reduceRight,y=o.filter,m=o.every,E=o.some,_=o.indexOf,R=o.lastIndexOf,O=Array.isArray,b=Object.keys,N=a.bind,A=function(t){return t instanceof A?t:this instanceof A?(this._wrapped=t,void 0):new A(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=A),e._=A,A.VERSION="1.5.2";var T=A.each=A.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var u=A.keys(t),r=0,o=u.length;o>r;r++)if(e.call(n,t[u[r]],u[r],t)===i)return};A.map=A.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(T(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var w="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=A.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,u){i?n=e.call(r,n,t,o,u):(n=t,i=!0)}),!i)throw new TypeError(w);return n},A.reduceRight=A.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduceRight===v)return r&&(e=A.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var u=A.keys(t);o=u.length}if(T(t,function(a,s,c){s=u?u[--o]:--o,i?n=e.call(r,n,t[s],s,c):(n=t[s],i=!0)}),!i)throw new TypeError(w);return n},A.find=A.detect=function(t,e,n){var r;return S(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},A.filter=A.select=function(t,e,n){var r=[];return null==t?r:y&&t.filter===y?t.filter(e,n):(T(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},A.reject=function(t,e,n){return A.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},A.every=A.all=function(t,e,n){e||(e=A.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,n):(T(t,function(t,o,u){return(r=r&&e.call(n,t,o,u))?void 0:i}),!!r)};var S=A.some=A.any=function(t,e,n){e||(e=A.identity);var r=!1;return null==t?r:E&&t.some===E?t.some(e,n):(T(t,function(t,o,u){return r||(r=e.call(n,t,o,u))?i:void 0}),!!r)};A.contains=A.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):S(t,function(t){return t===e})},A.invoke=function(t,e){var n=c.call(arguments,2),r=A.isFunction(e);return A.map(t,function(t){return(r?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,function(t){return t[e]})},A.where=function(t,e,n){return A.isEmpty(e)?n?void 0:[]:A[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},A.findWhere=function(t,e){return A.where(t,e,!0)},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&A.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return T(t,function(t,i,o){var u=e?e.call(n,t,i,o):t;u>r.computed&&(r={value:t,computed:u})}),r.value},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&A.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return T(t,function(t,i,o){var u=e?e.call(n,t,i,o):t;u<r.computed&&(r={value:t,computed:u})}),r.value},A.shuffle=function(t){var e,n=0,r=[];return T(t,function(t){e=A.random(n++),r[n-1]=r[e],r[e]=t}),r},A.sample=function(t,e,n){return arguments.length<2||n?t[A.random(t.length-1)]:A.shuffle(t).slice(0,Math.max(0,e))};var I=function(t){return A.isFunction(t)?t:function(e){return e[t]}};A.sortBy=function(t,e,n){var r=I(e);return A.pluck(A.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,r){var i={},o=null==n?A.identity:I(n);return T(e,function(n,u){var a=o.call(r,n,u,e);t(i,a,n)}),i}};A.groupBy=C(function(t,e,n){(A.has(t,e)?t[e]:t[e]=[]).push(n)}),A.indexBy=C(function(t,e,n){t[e]=n}),A.countBy=C(function(t,e){A.has(t,e)?t[e]++:t[e]=1}),A.sortedIndex=function(t,e,n,r){n=null==n?A.identity:I(n);for(var i=n.call(r,e),o=0,u=t.length;u>o;){var a=o+u>>>1;n.call(r,t[a])<i?o=a+1:u=a}return o},A.toArray=function(t){return t?A.isArray(t)?c.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:c.call(t,0,e)},A.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var x=function(t,e,n){return e&&A.every(t,A.isArray)?l.apply(n,t):(T(t,function(t){A.isArray(t)||A.isArguments(t)?e?s.apply(n,t):x(t,e,n):n.push(t)}),n)};A.flatten=function(t,e){return x(t,e,[])},A.without=function(t){return A.difference(t,c.call(arguments,1))},A.uniq=A.unique=function(t,e,n,r){A.isFunction(e)&&(r=n,n=e,e=!1);var i=n?A.map(t,n,r):t,o=[],u=[];return T(i,function(n,r){(e?r&&u[u.length-1]===n:A.contains(u,n))||(u.push(n),o.push(t[r]))}),o},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(t){var e=c.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.indexOf(e,t)>=0})})},A.difference=function(t){var e=l.apply(o,c.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=A.max(A.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=A.pluck(arguments,""+n);return e},A.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=A.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(R&&t.lastIndexOf===R)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var j=function(){};A.bind=function(t,e){var n,r;if(N&&t.bind===N)return N.apply(t,c.call(arguments,1));if(!A.isFunction(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));j.prototype=t.prototype;var i=new j;j.prototype=null;var o=t.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},A.partial=function(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}},A.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return T(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var r=e.apply(this,arguments);return A.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},A.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(c.call(arguments,1)))},A.throttle=function(t,e,n){var r,i,o,u=null,a=0;n||(n={});var s=function(){a=n.leading===!1?0:new Date,u=null,o=t.apply(r,i)};return function(){var c=new Date;a||n.leading!==!1||(a=c);var l=e-(c-a);return r=this,i=arguments,0>=l?(clearTimeout(u),u=null,a=c,o=t.apply(r,i)):u||n.trailing===!1||(u=setTimeout(s,l)),o}},A.debounce=function(t,e,n){var r,i,o,u,a;return function(){o=this,i=arguments,u=new Date;var s=function(){var c=new Date-u;e>c?r=setTimeout(s,e-c):(r=null,n||(a=t.apply(o,i)))},c=n&&!r;return r||(r=setTimeout(s,e)),c&&(a=t.apply(o,i)),a}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)A.has(t,n)&&e.push(n);return e},A.values=function(t){for(var e=A.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},A.pairs=function(t){for(var e=A.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},A.invert=function(t){for(var e={},n=A.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return T(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=l.apply(o,c.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=l.apply(o,c.call(arguments,1));for(var r in t)A.contains(n,r)||(e[r]=t[r]);return e},A.defaults=function(t){return T(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t};var D=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var i=f.call(t);if(i!=f.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var u=t.constructor,a=e.constructor;if(u!==a&&!(A.isFunction(u)&&u instanceof u&&A.isFunction(a)&&a instanceof a))return!1;n.push(t),r.push(e);var s=0,c=!0;if("[object Array]"==i){if(s=t.length,c=s==e.length)for(;s--&&(c=D(t[s],e[s],n,r)););}else{for(var l in t)if(A.has(t,l)&&(s++,!(c=A.has(e,l)&&D(t[l],e[l],n,r))))break;if(c){for(l in e)if(A.has(e,l)&&!s--)break;c=!s}}return n.pop(),r.pop(),c};A.isEqual=function(t,e){return D(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=O||function(t){return"[object Array]"==f.call(t)},A.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),A.isFunction=function(t){return"function"==typeof t},A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return p.call(t,e)},A.noConflict=function(){return n._=r,this},A.identity=function(t){return t},A.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=A.invert(M.escape);var L={escape:new RegExp("["+A.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(M.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace(L[t],function(e){return M[t][e]})}}),A.result=function(t,e){if(null==t)return void 0;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){T(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),V.call(this,n.apply(A,t))}})};var P=0;A.uniqueId=function(t){var e=++P+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},k=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var r;n=A.defaults({},n,A.templateSettings);var i=new RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(i,function(e,n,r,i,a){return u+=t.slice(o,a).replace(k,function(t){return"\\"+U[t]}),n&&(u+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(u+="';\n"+i+"\n__p+='"),o=a+e.length,e}),u+="';\n",n.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{r=new Function(n.variable||"obj","_",u)}catch(a){throw a.source=u,a}if(e)return r(e,A);var s=function(t){return r.call(this,t,A)};return s.source="function("+(n.variable||"obj")+"){\n"+u+"}",s},A.chain=function(t){return A(t).chain()};var V=function(t){return this._chain?A(t).chain():t};A.mixin(A),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],V.call(this,n)}}),T(["concat","join","slice"],function(t){var e=o[t];A.prototype[t]=function(){return V.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},6:function(t,e,n){var r=n(36);t.exports=r},7:function(t,e){(function(){function n(t,e,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;if(t._chain&&(t=t._wrapped),e._chain&&(e=e._wrapped),t.isEqual&&A.isFunction(t.isEqual))return t.isEqual(e);if(e.isEqual&&A.isFunction(e.isEqual))return e.isEqual(t);var i=f.call(t);if(i!=f.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=r.length;o--;)if(r[o]==t)return!0;r.push(t);var u=0,a=!0;if("[object Array]"==i){if(u=t.length,a=u==e.length)for(;u--&&(a=u in t==u in e&&n(t[u],e[u],r)););}else{if("constructor"in t!="constructor"in e||t.constructor!=e.constructor)return!1;for(var s in t)if(A.has(t,s)&&(u++,!(a=A.has(e,s)&&n(t[s],e[s],r))))break;if(a){for(s in e)if(A.has(e,s)&&!u--)break;a=!u}}return r.pop(),a}var r=this,i=r._,o={},u=Array.prototype,a=Object.prototype,s=Function.prototype,c=u.slice,l=u.unshift,f=a.toString,p=a.hasOwnProperty,h=u.forEach,d=u.map,g=u.reduce,v=u.reduceRight,y=u.filter,m=u.every,E=u.some,_=u.indexOf,R=u.lastIndexOf,O=Array.isArray,b=Object.keys,N=s.bind,A=function(t){return new P(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=A),e._=A,A.VERSION="1.3.3";var T=A.each=A.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(r in t&&e.call(n,t[r],r,t)===o)return}else for(var u in t)if(A.has(t,u)&&e.call(n,t[u],u,t)===o)return};A.map=A.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(T(t,function(t,i,o){r[r.length]=e.call(n,t,i,o)}),t.length===+t.length&&(r.length=t.length),r)},A.reduce=A.foldl=A.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=A.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,u){i?n=e.call(r,n,t,o,u):(n=t,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return n},A.reduceRight=A.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduceRight===v)return r&&(e=A.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=A.toArray(t).reverse();return r&&!i&&(e=A.bind(e,r)),i?A.reduce(o,e,n,r):A.reduce(o,e)},A.find=A.detect=function(t,e,n){var r;return w(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},A.filter=A.select=function(t,e,n){var r=[];return null==t?r:y&&t.filter===y?t.filter(e,n):(T(t,function(t,i,o){e.call(n,t,i,o)&&(r[r.length]=t)}),r)},A.reject=function(t,e,n){var r=[];return null==t?r:(T(t,function(t,i,o){e.call(n,t,i,o)||(r[r.length]=t)}),r)},A.every=A.all=function(t,e,n){var r=!0;return null==t?r:m&&t.every===m?t.every(e,n):(T(t,function(t,i,u){return(r=r&&e.call(n,t,i,u))?void 0:o}),!!r)};var w=A.some=A.any=function(t,e,n){e||(e=A.identity);var r=!1;return null==t?r:E&&t.some===E?t.some(e,n):(T(t,function(t,i,u){return r||(r=e.call(n,t,i,u))?o:void 0}),!!r)};A.include=A.contains=function(t,e){var n=!1;return null==t?n:_&&t.indexOf===_?-1!=t.indexOf(e):n=w(t,function(t){return t===e})},A.invoke=function(t,e){var n=c.call(arguments,2);return A.map(t,function(t){return(A.isFunction(e)?e||t:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,function(t){return t[e]})},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&A.isEmpty(t))return-1/0;var r={computed:-1/0};return T(t,function(t,i,o){var u=e?e.call(n,t,i,o):t;u>=r.computed&&(r={value:t,computed:u})}),r.value},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&A.isEmpty(t))return 1/0;var r={computed:1/0};return T(t,function(t,i,o){var u=e?e.call(n,t,i,o):t;u<r.computed&&(r={value:t,computed:u})}),r.value},A.shuffle=function(t){var e,n=[];return T(t,function(t,r){e=Math.floor(Math.random()*(r+1)),n[r]=n[e],n[e]=t}),n},A.sortBy=function(t,e,n){var r=A.isFunction(e)?e:function(t){return t[e]};return A.pluck(A.map(t,function(t,e,i){return{value:t,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;return void 0===n?1:void 0===r?-1:r>n?-1:n>r?1:0}),"value")},A.groupBy=function(t,e){var n={},r=A.isFunction(e)?e:function(t){return t[e]};return T(t,function(t,e){var i=r(t,e);(n[i]||(n[i]=[])).push(t)}),n},A.sortedIndex=function(t,e,n){n||(n=A.identity);for(var r=0,i=t.length;i>r;){var o=r+i>>1;n(t[o])<n(e)?r=o+1:i=o}return r},A.toArray=function(t){return t?A.isArray(t)?c.call(t):A.isArguments(t)?c.call(t):t.toArray&&A.isFunction(t.toArray)?t.toArray():A.values(t):[]},A.size=function(t){return A.isArray(t)?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==e||n?t[0]:c.call(t,0,e)},A.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},A.rest=A.tail=function(t,e,n){return c.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,function(t){return!!t})},A.flatten=function(t,e){return A.reduce(t,function(t,n){return A.isArray(n)?t.concat(e?n:A.flatten(n)):(t[t.length]=n,t)},[])},A.without=function(t){return A.difference(t,c.call(arguments,1))},A.uniq=A.unique=function(t,e,n){var r=n?A.map(t,n):t,i=[];return t.length<3&&(e=!0),A.reduce(r,function(n,r,o){return(e?A.last(n)===r&&n.length:A.include(n,r))||(n.push(r),i.push(t[o])),n},[]),i},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=A.intersect=function(t){var e=c.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.indexOf(e,t)>=0})})},A.difference=function(t){var e=A.flatten(c.call(arguments,1),!0);return A.filter(t,function(t){return!A.include(e,t)})},A.zip=function(){for(var t=c.call(arguments),e=A.max(A.pluck(t,"length")),n=new Array(e),r=0;e>r;r++)n[r]=A.pluck(t,""+r);return n},A.indexOf=function(t,e,n){if(null==t)return-1;var r,i;if(n)return r=A.sortedIndex(t,e),t[r]===e?r:-1;if(_&&t.indexOf===_)return t.indexOf(e);for(r=0,i=t.length;i>r;r++)if(r in t&&t[r]===e)return r;return-1},A.lastIndexOf=function(t,e){if(null==t)return-1;if(R&&t.lastIndexOf===R)return t.lastIndexOf(e);for(var n=t.length;n--;)if(n in t&&t[n]===e)return n;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var S=function(){};A.bind=function(t,e){var n,r;if(t.bind===N&&N)return N.apply(t,c.call(arguments,1));if(!A.isFunction(t))throw new TypeError;return r=c.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,r.concat(c.call(arguments)));S.prototype=t.prototype;var i=new S,o=t.apply(i,r.concat(c.call(arguments)));return Object(o)===o?o:i}},A.bindAll=function(t){var e=c.call(arguments,1);return 0==e.length&&(e=A.functions(t)),T(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var r=e.apply(this,arguments);return A.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},A.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(c.call(arguments,1)))},A.throttle=function(t,e){var n,r,i,o,u,a,s=A.debounce(function(){u=o=!1},e);return function(){n=this,r=arguments;var c=function(){i=null,u&&t.apply(n,r),s()};return i||(i=setTimeout(c,e)),o?u=!0:a=t.apply(n,r),s(),o=!0,a}},A.debounce=function(t,e,n){var r;return function(){var i=this,o=arguments,u=function(){r=null,n||t.apply(i,o)};n&&!r&&t.apply(i,o),clearTimeout(r),r=setTimeout(u,e)}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}},A.wrap=function(t,e){return function(){var n=[t].concat(c.call(arguments,0));return e.apply(this,n)}},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)A.has(t,n)&&(e[e.length]=n);return e},A.values=function(t){return A.map(t,A.identity)},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return T(c.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={};return T(A.flatten(c.call(arguments,1)),function(n){n in t&&(e[n]=t[n])}),e},A.defaults=function(t){return T(c.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t},A.isEqual=function(t,e){return n(t,e,[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!=t.nodeType)},A.isArray=O||function(t){return"[object Array]"==f.call(t)},A.isObject=function(t){return t===Object(t)},A.isArguments=function(t){return"[object Arguments]"==f.call(t)},A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),A.isFunction=function(t){return"[object Function]"==f.call(t)},A.isString=function(t){return"[object String]"==f.call(t)},A.isNumber=function(t){return"[object Number]"==f.call(t)},A.isFinite=function(t){return A.isNumber(t)&&isFinite(t)},A.isNaN=function(t){return t!==t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},A.isDate=function(t){return"[object Date]"==f.call(t)},A.isRegExp=function(t){return"[object RegExp]"==f.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return p.call(t,e)},A.noConflict=function(){return r._=i,this},A.identity=function(t){return t},A.times=function(t,e,n){for(var r=0;t>r;r++)e.call(n,r)},A.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},A.result=function(t,e){if(null==t)return null;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){T(A.functions(t),function(e){U(e,A[e]=t[e])})};var I=0;A.uniqueId=function(t){var e=I++;return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,x={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var j in x)x[x[j]]=j;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,M=/\\(\\|'|r|n|t|u2028|u2029)/g,L=function(t){return t.replace(M,function(t,e){return x[e]})};A.template=function(t,e,n){n=A.defaults(n||{},A.templateSettings);var r="__p+='"+t.replace(D,function(t){return"\\"+x[t]}).replace(n.escape||C,function(t,e){return"'+\n_.escape("+L(e)+")+\n'"}).replace(n.interpolate||C,function(t,e){return"'+\n("+L(e)+")+\n'"}).replace(n.evaluate||C,function(t,e){return"';\n"+L(e)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(e)return i(e,A);var o=function(t){return i.call(this,t,A)};return o.source="function("+(n.variable||"obj")+"){\n"+r+"}",o},A.chain=function(t){return A(t).chain()};var P=function(t){this._wrapped=t};A.prototype=P.prototype;var F=function(t,e){return e?A(t).chain():t},U=function(t,e){P.prototype[t]=function(){var t=c.call(arguments);return l.call(t,this._wrapped),F(e.apply(A,t),this._chain)}};A.mixin(A),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];P.prototype[t]=function(){var n=this._wrapped;e.apply(n,arguments);var r=n.length;return"shift"!=t&&"splice"!=t||0!==r||delete n[0],F(n,this._chain)}}),T(["concat","join","slice"],function(t){var e=u[t];P.prototype[t]=function(){return F(e.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped}}).call(this)},8:function(t){function e(){}e.prototype.toJSON=function(){return JSON.stringify(this.toObject())},e.prototype.toObject=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(t[e]=this[e]);return t},e.fromJSON=function(t){var e=this,n=JSON.parse(t);return e.fromObject(n)},e.fromObject=function(t){var e=this,n=new e;for(var r in t)t.hasOwnProperty(r)&&"function"!=typeof t[r]&&(n[r]=t[r]);return n},t.exports=e},9:function(t,e,n){var r,i,o,u,a=n(1),s=n(7);u=function(t,e){Error.captureStackTrace(this,e||this),this.message=t},a.inherits(u,Error),u.prototype.name="Base ImplementJS Error",t.exports.TooManyArgsError=i=function(){i.super_.call(this,"The array has too many values.",this.constructor)},a.inherits(i,u),i.prototype.name="Too Many Arguments Error",t.exports.UnexpectedTypeError=o=function(t,e){var n=[],r=[];if(t=t||{},!s.isEmpty(t)){n.push("The values of ");for(var i in t)r.push(i);r.sort(),n.push(r.toString()+" are not of the expected types.")}o.super_.call(this,n.join(""),e||this.constructor),this.typeMismatch=t},a.inherits(o,u),o.prototype.name="Unexpected Type Error",t.exports.NotImplementedError=r=function(t,e){r.super_.call(this,t,this.constructor),e=e||[],e.length>0&&(this.message=(this.message?this.message+" ":"")+"The keys "+e.toString()+" are missing."),this.missingKeys=e
},a.inherits(r,o),r.prototype.name="Not Implemented Error",t.exports.getErrorBuilder=function(t){function e(t){i.missingKeys.push(t)}function n(t,e,n){i.typeMismatch[t]={actualType:e,expectedType:n}}var i={missingKeys:[],typeMismatch:{}},u={};return u.addKeyError=function(r,i,o){"undefined"!==i||t?n(r,i,o):e(r)},u.throwIfError=function(){var e;if(i.missingKeys.length>0||!s.isEmpty(i.typeMismatch))throw e=t?new o(i.typeMismatch):new r(i.typeMismatch,i.missingKeys)},u}},10:function(t,e,n){t.exports=n(12).EventEmitter},11:function(t,e){function n(){"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}e.v1=n,e.v4=n},12:function(t,e,n){var r=e.EventEmitter=function(){},i=n(16),o=(n(31),10);r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(i(e)){for(var n=Array.prototype.slice.call(arguments,1),r=e.slice(),o=0,u=r.length;u>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned){var n;n=void 0!==this._maxListeners?this._maxListeners:o,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(events) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){r.removeListener(t,n),e.apply(this,arguments)}if("function"!=typeof e)throw new Error(".once only takes instances of Function");var r=this;return n.listener=e,r.on(t,n),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(i(n)){for(var r=-1,o=0,u=n.length;u>o;o++)if(n[o]===e||n[o].listener&&n[o].listener===e){r=o;break}if(0>r)return this;n.splice(r,1),0==n.length&&delete this._events[t]}else(n===e||n.listener&&n.listener===e)&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}},13:function(t,e,n){function r(t,e){d.assertArgs(arguments,[d.S,d.S]),r.super_.call(this);var n=this;this._uri=t,this._id=e,this._clientId=null,this._connection=new a,this._clients=new l(this),this._connection.on(a.EVENT_DISCONNECT,function(){n._clients.clear(),n.emit(r.EVENT_DISCONNECT)}),this._connection.on(a.EVENT_ERROR,function(t){n.emit(r.EVENT_ERROR,t)}),this._connection.on(a.EVENT_MESSAGE,function(t){n._handleMessage(t)})}var i=n(1),o=n(2).events.EventEmitter,u=n(2).errors.MultiScreenError,a=n(2).connections.WebSocketConnection,s=n(2).rpc.JSONMessage,c=n(18),l=n(14),f=n(2).rpc.JSONSerializable,p=n(5),h=(n(4),n(6)),d=n(3);i.inherits(r,o),Object.defineProperty(r.prototype,"id",{get:function(){return this._id}}),Object.defineProperty(r.prototype,"uri",{get:function(){return this._uri}}),Object.defineProperty(r.prototype,"clients",{get:function(){return this._clients}}),Object.defineProperty(r.prototype,"isConnected",{get:function(){return this._connection.isConnected}}),r.prototype.connect=function(t,e,n){if(d.assertArgs(arguments,[d.O,d.F]),this.isConnected)throw new u(u.INVALID_MODIFICATION_ERR,"Channel is already connected");this.hostToken&&(t.__token=this.hostToken);var i=this,o=this._uri,a=[];for(var s in t)a.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));o+="?"+a.join("&"),this._connection.connect(o,function(t){return t?(p.isFunction(n)&&n(t),void 0):(i.once(r.EVENT_CONNECT,function(t){e(t)}),void 0)})},r.prototype.disconnect=function(t,e){if(!this.isConnected)throw new u(u.INVALID_MODIFICATION_ERR,"Channel is already disconnected");this._connection.disconnect(function(n){return n?(p.isFunction(e)&&e(n),void 0):(p.isFunction(t)&&t(),void 0)})},r.prototype.send=function(t,e){if(!this.isConnected)throw new u(u.ABORT_ERR,"Channel is not connected");if(!p.isString(t)&&!p.isObject(t))throw new u(u.TYPE_MISMATCH_ERR,"message must be a string or object");if(!p.isString(e)&&!p.isArray(e))throw new u(u.TYPE_MISMATCH_ERR,"target must be a string or an array");var n=new s(s.CHANNEL_SEND_MESSAGE,{message:t,to:e});this._connection.send(n.toJSON())},r.prototype.broadcast=function(t){if(!this.isConnected)throw new u(u.ABORT_ERR,"Channel is not connected");if(!p.isString(t)&&!p.isObject(t))throw new u(u.TYPE_MISMATCH_ERR,"message must be a string or object");this.send(t,"broadcast")},r.prototype.destroy=function(){this.disconnect(function(){this.removeAllListeners(),this._clients.destroy(),this._connection.destroy(),delete this._connection,delete this._clients},this)},r.prototype._handleMessage=function(t){var e,n=s.fromJSON(t);switch(n.method){case s.CHANNEL_ON_CONNECT:this._clientId=n.params.clientId,n.params.clients.forEach(function(t){e=new c(this,t.id,t.attributes,t.isHost,t.connectTime),this._clients.add(e),e.id===this._clientId&&this.emit(r.EVENT_CONNECT,e)},this);break;case s.CHANNEL_ON_CLIENT_CONNECT:e=new c(this,n.params.id,n.params.attributes,n.params.isHost,n.params.connectTime),this._clients.add(e),this.emit(r.EVENT_CLIENT_CONNECT,e);break;case s.CHANNEL_ON_CLIENT_DISCONNECT:e=this._clients.get(n.params.id),this._clients.remove(e),this.emit(r.EVENT_CLIENT_DISCONNECT,e);break;case s.CHANNEL_ON_CLIENT_MESSAGE:e=this._clients.findWhere({id:n.params.from}),this.emit(r.EVENT_MESSAGE,n.params.message,e)}},r.prototype.toJSON=f.prototype.toJSON,r.prototype.toObject=f.prototype.toObject,r.fromJSON=f.fromJSON,r.fromObject=f.fromObject,r.create=function(t,e,n,i){d.assertArgs(arguments,[d.S,d.S,d.F]);var o=new s(s.DEVICE_CHANNEL_CREATE,{id:e});h.post({url:t,json:o.toObject()},function(t,e,o){var a=t||(o.error?new u(o.error.code):null)||(e.status>=400?new u(u.ABORT_ERR):null);if(a)return p.isFunction(i)&&i(a),void 0;var s=o.result,c=new r(s.endpoint,s.id);c.hostToken=s.__token,n(c)})},r.get=function(t,e,n,i){d.assertArgs(arguments,[d.S,d.S,d.F]);var o=new s(s.DEVICE_CHANNEL_INFO,{id:e});h.post({url:t,json:o.toObject()},function(t,e,o){var a=t||(o.error?new u(o.error.code):null)||(e.status>=400?new u(u.ABORT_ERR):null);if(a)return"function"==typeof i&&i(a),void 0;var s=o.result,c=new r(s.endpoint,s.id);n(c)})},r.EVENT_CONNECT="connect",r.EVENT_DISCONNECT="disconnect",r.EVENT_MESSAGE="message",r.EVENT_ERROR="error",r.EVENT_CLIENT_CONNECT="clientConnect",r.EVENT_CLIENT_DISCONNECT="clientDisconnect",t.exports=r},14:function(t,e,n){function r(t,e){u.assertArgs(arguments,[u.O]),r.super_.call(this,e),this._channel=t}var i=n(1),o=n(2).data.Collection,u=n(3);i.inherits(r,o),r.prototype.get=function(t){return u.assertArgs(arguments,[u.S]),this.findWhere({id:t})},Object.defineProperty(r.prototype,"host",{get:function(){return this.findWhere({isHost:!0})}}),Object.defineProperty(r.prototype,"me",{get:function(){return this.get(this._channel._clientId)}}),r.prototype.destroy=function(){this.removeAllListeners(),this.clear(),delete this._channel},t.exports=r},15:function(t,e,n){function r(t){var e=[];do Object.getOwnPropertyNames(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)});while(t=Object.getPrototypeOf(t));return e}var i,o=n(7),u={};t.exports=u,u.NativeTypes=i=["boolean","function","number","object","string","undefined"],u.assertValueType=function(t,e,n){var r,i="";if(r=typeof t,r!==e.typeofString)i=e.typeofString;else if("object"===e.typeofString)if(o.isNull(t)){if(n)return i;e.isNull||(i=e.specificType)}else e.isDate&&!o.isDate(t)?i=e.specificType:e.isRegExp&&!o.isRegExp(t)?i=e.specificType:e.isNull?i=e.specificType:e.isArray&&!o.isArray(t)&&(i=e.specificType);return i},u.getTypeInfoHash=function(t,e){var n,r,u,a,s={};a=o.isArray(t),u=a?t.length:e.length;for(var c=0;u>c;c++)n=a?c:e[c],r=typeof t[n],s[n]={},"string"!==r||o.indexOf(i,t[n],!0)<0?(s[n].typeofString=r,s[n].specificType="object","object"===r&&(o.isDate(t[n])?(s[n].isDate=!0,s[n].specificType="Date"):o.isRegExp(t[n])?(s[n].isRegExp=!0,s[n].specificType="RegExp"):o.isNull(t[n])?(s[n].isNull=!0,s[n].specificType="null"):o.isArray(t[n])?(s[n].isArray=!0,s[n].specificType="Array"):o.isEmpty(t[n])||(s[n].isDeep=!0))):(s[n].typeofString=t[n],s[n].specificType=s[n].typeofString);return s},u.getObjectKeys=function(t,e){var n;if(e)n=r(t);else{n=[];for(var i in t)n.push(i)}return n.sort(),n}},16:function(t){t.exports="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},17:function(t,e,n){function r(t){l.assertArgs(arguments,[l.O]),r.super_.call(this),this.attributes=t||{}}var i=n(1),o=n(12).EventEmitter,u=n(2).errors.MultiScreenError,a=n(5),s=n(6),c=(n(4),n(2).rpc.JSONMessage),l=(n(13),n(3));i.inherits(r,o),Object.defineProperty(r.prototype,"ip",{get:function(){return this.attributes.IP}}),Object.defineProperty(r.prototype,"id",{get:function(){return this.attributes.UDN}}),Object.defineProperty(r.prototype,"serviceURI",{get:function(){return this.attributes.ServiceURI}}),Object.defineProperty(r.prototype,"dialURI",{get:function(){return this.attributes.DialURI}}),Object.defineProperty(r.prototype,"name",{get:function(){return this.attributes.DeviceName||this.attributes.ModelDescription||"Multi-Screen Device"}}),Object.defineProperty(r.prototype,"networkType",{get:function(){return this.attributes.NetworkType||"Unknown"}}),Object.defineProperty(r.prototype,"ssid",{get:function(){return this.attributes.SSID}}),r.prototype.getPinCode=function(t,e){l.assertArgs(arguments,[l.F]);var n=new c(c.DEVICE_GET_PINCODE);s.post({url:this.serviceURI,json:n.toObject()},function(n,r,i){var o=n||(i.error?new u(i.error.code):null)||(r.status>=400?new u(u.ABORT_ERR):null);return o?(a.isFunction(e)&&e(o),void 0):(t(i.result),void 0)})},r.prototype.showPinCode=function(t,e){l.assertArgs(arguments,[l.F]);var n=new c(c.DEVICE_SHOW_PINCODE);s.post({url:this.serviceURI,json:n.toObject()},function(n,r,i){var o=n||(i.error?new u(i.error.code):null)||(r.status>=400?new u(u.ABORT_ERR):null);return o?(a.isFunction(e)&&e(o),void 0):(t(),void 0)})},r.prototype.hidePinCode=function(t,e){l.assertArgs(arguments,[l.F]);var n=new c(c.DEVICE_HIDE_PINCODE);s.post({url:this.serviceURI,json:n.toObject()},function(n,r,i){var o=n||(i.error?new u(i.error.code):null)||(r.status>=400?new u(u.ABORT_ERR):null);return o?(a.isFunction(e)&&e(o),void 0):(t(),void 0)})},r.getDevice=function(t,e,n){var r=this;l.assertArgs(arguments,[l.S,l.F]);var i=new c(c.DEVICE_INFO);s.post({url:t,timeout:2e3,json:i.toObject()},function(t,i,o){var s=t||(o.error?new u(o.error.code):null)||(i.status>=400?new u(u.ABORT_ERR):null);if(s)return a.isFunction(n)&&n(s),void 0;o=o.result;var c=new r(o);e(c)})},t.exports=r},18:function(t,e,n){function r(t,e,n,r,i){o.assertArgs(arguments,[o.O,o.S]),this._channel=t,this._id=e,this._isHost=r||!1,this._attributes=n||{},this._connectTime=i||Date.now()}var i=(n(1),n(14),n(2).rpc.JSONSerializable),o=(n(5),n(4),n(6),n(3));Object.defineProperty(r.prototype,"isMe",{get:function(){return this._channel.getClients().me===this}}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id}}),Object.defineProperty(r.prototype,"isHost",{get:function(){return this._isHost}}),Object.defineProperty(r.prototype,"connectTime",{get:function(){return this._connectTime}}),Object.defineProperty(r.prototype,"attributes",{get:function(){return this._attributes}}),r.prototype.send=function(t){o.assertArgs(arguments,[o.S]),this._channel.send(t,this.id)},r.prototype.toJSON=i.prototype.toJSON,r.prototype.toObject=i.prototype.toObject,r.fromJSON=i.fromJSON,r.fromObject=i.fromObject,t.exports=r},19:function(t,e,n){{var r=n(15),i=n(9);n(7)}t.exports=function(t,e,n){var o,u,a,s,c,l=i.getErrorBuilder(!0),f=[];n=n||{},t=t||[],e=e||[],o=r.getTypeInfoHash(e),c=0,s=0;for(var p=0;p<e.length;p++)u=typeof t[s],a=r.assertValueType(t[s],o[p],n.allowNullObjects),a?n.optionalArgsStartIndex<=p?f.push(void 0):(l.addKeyError(p,u,a),s++):(f.push(t[s]),s++,c++);if(l.throwIfError(),n.strict&&c<t.length)throw new i.TooManyArgsError;return f}},20:function(t){var e={};e.F=e.Function=function(){},e.A=e.Array=[],e.R=e.RegExp=/ /,e.O=e.Object={},e.N=e.Number=0,e.S=e.String="",e.B=e.Boolean=!1,e.U=e.Undefined=void 0,e.L=e.Null=null,e.D=e.Date=new Date,e.createInterface=function(){function t(t,e){return n[t]=e,r}var n={},r={};return r.addFunction=function(n){return t(n,e.F)},r.addArray=function(n){return t(n,e.A)},r.addRegExp=function(n){return t(n,e.R)},r.addObject=function(n,r){return t(n,r||e.O)},r.addNumber=function(n){return t(n,e.N)},r.addString=function(n){return t(n,e.S)},r.addBoolean=function(n){return t(n,e.B)},r.addUndefined=function(n){return t(n,e.U)},r.addNull=function(n){return t(n,e.L)},r.addDate=function(n){return t(n,e.D)},r.getInterface=function(){return n},r},t.exports=e},21:function(t,e,n){var r=n(22),i=n(9),o=n(20),u=n(19);t.exports=o,t.exports.version="0.2.2",t.exports.NotImplementedError=i.NotImplementedError,t.exports.TooManyArgsError=i.TooManyArgsError,t.exports.UnexpectedTypeError=i.UnexpectedTypeError,t.exports.implements=r,t.exports.assertArgs=t.exports.assertArguments=t.exports.assertValues=u},22:function(t,e,n){function r(t,e,n){function r(t,e,u){for(var s,c,l,f,p=o.getObjectKeys(e),h=o.getTypeInfoHash(e,p),d=0;d<p.length;d++)s=p[d],l=u+s,c=typeof t[s],f=o.assertValueType(t[s],h[s],n.allowNullObjects),f?a.addKeyError(l,c,f):h[s].isDeep&&!i.isNull(t[s])&&r(t[s],e[s],u+s+".")}var a=u.getErrorBuilder();if(n=n||{},n.allowNullObjects||!i.isNull(t)||i.isNull(e)||i.isUndefined(e)){if(n.allowNullObjects&&i.isNull(t))return}else a.addKeyError(".","null","object"),a.throwIfError();e=e||{},t=t||{},r(t,e,""),a.throwIfError()}var i=n(7),o=n(15),u=n(9);t.exports=function(t,e,n){if(i.isArray(e))for(var o=0;o<e.length;o++)r(t,e[o],n);else r(t,e,n)}},23:function(t,e,n){function r(){this._socket=null,this._isConnected=!1}var i=n(1),o=n(10);i.inherits(r,o),Object.defineProperty(r.prototype,"isConnected",{get:function(){return this._isConnected}}),r.prototype.connect=function(t,e,n){var i=this;this._socket=new WebSocket(t),this._socket.onopen=function(){i._isConnected=!0,e.apply(n,[null,i]),i.emit(r.EVENT_CONNECT,i)},this._socket.onmessage=function(t){i.emit(r.EVENT_MESSAGE,t.data)},this._socket.onclose=function(){i._isConnected=!1,i.emit(r.EVENT_DISCONNECT)},this._socket.onerror=function(){i.emit(r.EVENT_ERROR)}},r.prototype.disconnect=function(t,e){this._socket.close(),"function"==typeof t&&t.apply(e,null,{success:!0})},r.prototype.send=function(t){this._socket.send(t)},r.EVENT_CONNECT="connect",r.EVENT_DISCONNECT="disconnect",r.EVENT_MESSAGE="message",r.EVENT_ERROR="error",t.exports=r},24:function(t,e,n){function r(t){r.super_.call(this),this._items=t||[]}var i=n(1),o=n(10),u=n(29);i.inherits(r,o),Object.defineProperty(r.prototype,"length",{get:function(){return this._items.length}}),r.prototype.add=function(t){this.addAt(this.length,t)},r.prototype.addAt=function(t,e){if(t<this.length&&t>=0)this._items.splice(t,0,e);else{if(t!==this.length)return;this._items[t]=e}this.emit("add",e,t)},r.prototype.clear=function(){this._items.splice(0),this.emit("clear")},r.prototype.contains=function(t){return u.contains(this._items,t)},r.prototype.forEach=function(t,e){return u.each(this._items,t,e)},r.prototype.getAt=function(t){return 0>t||t>=this.length?null:this._items[t]},r.prototype.getAll=function(){return this._items},r.prototype.where=function(t){return u.where(this._items,t)},r.prototype.findWhere=function(t){return u.findWhere(this._items,t)},r.prototype.filter=function(t,e){var n=u.filter(this._items,t,e);return new r(n)},r.prototype.sort=function(t){this._items.sort(t),this.emit("sort")},r.prototype.sortBy=function(t,e){u.sortBy(this._items,t),"DESC"===e.toUpperCase()&&this._items.reverse(),this.emit("sort")},r.prototype.isEmpty=function(){return 0===this._items.length},r.prototype.remove=function(t){for(var e=0;e<this.length;e++)this._items[e]===t&&this.removeAt(e)},r.prototype.removeAt=function(t,e){e=e||1,this._items.splice(t,e),this.emit("remove",t,e)},t.exports=r},25:function(t,e,n){function r(t,e){if(this.code=t,this.message=e||r.Messages[t]||"Error",Error.captureStackTrace)Error.captureStackTrace(this,this);else{var n=new Error;this.stack=n.stack}}var i=n(1);i.inherits(r,Error),r.prototype.name="SCError",r.prototype.toObject=function(){return{code:this.code,message:this.message}},r.fromObject=function(t){return new r(t.code,t.message)},r.parse=function(t){try{var e=JSON.parse(t);return new r(e.code,e.message)}catch(n){return new r(r.VALIDATION_ERR)}},r.NO_SCError=0,r.INDEX_SIZE_ERR=1,r.DOMSTRING_SIZE_ERR=2,r.HIERARCHY_REQUEST_ERR=3,r.WRONG_DOCUMENT_ERR=4,r.INVALID_CHARACTER_ERR=5,r.NO_DATA_ALLOWED_ERR=6,r.NO_MODIFICATION_ALLOWED_ERR=7,r.NOT_FOUND_ERR=8,r.NOT_SUPPORTED_ERR=9,r.INUSE_ATTRIBUTE_ERR=10,r.INVALID_STATE_ERR=11,r.SYNTAX_ERR=12,r.INVALID_MODIFICATION_ERR=13,r.NAMESPACE_ERR=14,r.INVALID_ACCESS_ERR=15,r.VALIDATION_ERR=16,r.TYPE_MISMATCH_ERR=17,r.SECURITY_ERR=17,r.NETWORK_ERR=17,r.ABORT_ERR=19,r.URL_MISMATCH_ERR=20,r.QUOTA_EXCEEDED_ERR=21,r.TIMEOUT_ERR=22,r.INVALID_NODE_TYPE_ERR=23,r.DATA_CLONE_ERR=24,r.Messages=[],r.Messages[r.NO_SCError]="NO_SCError",r.Messages[r.INDEX_SIZE_ERR]="INDEX_SIZE_ERR",r.Messages[r.DOMSTRING_SIZE_ERR]="DOMSTRING_SIZE_ERR",r.Messages[r.HIERARCHY_REQUEST_ERR]="HIERARCHY_REQUEST_ERR",r.Messages[r.WRONG_DOCUMENT_ERR]="WRONG_DOCUMENT_ERR",r.Messages[r.INVALID_CHARACTER_ERR]="INVALID_CHARACTER_ERR",r.Messages[r.NO_DATA_ALLOWED_ERR]="NO_DATA_ALLOWED_ERR",r.Messages[r.NO_MODIFICATION_ALLOWED_ERR]="NO_MODIFICATION_ALLOWED_ERR",r.Messages[r.NOT_FOUND_ERR]="NOT_FOUND_ERR",r.Messages[r.NOT_SUPPORTED_ERR]="NOT_SUPPORTED_ERR",r.Messages[r.INUSE_ATTRIBUTE_ERR]="INUSE_ATTRIBUTE_ERR",r.Messages[r.INVALID_STATE_ERR]="INVALID_STATE_ERR",r.Messages[r.SYNTAX_ERR]="SYNTAX_ERR",r.Messages[r.INVALID_MODIFICATION_ERR]="INVALID_MODIFICATION_ERR",r.Messages[r.NAMESPACE_ERR]="NAMESPACE_ERR",r.Messages[r.INVALID_ACCESS_ERR]="INVALID_ACCESS_ERR",r.Messages[r.VALIDATION_ERR]="VALIDATION_ERR",r.Messages[r.TYPE_MISMATCH_ERR]="TYPE_MISMATCH_ERR",r.Messages[r.SECURITY_ERR]="SECURITY_ERR",r.Messages[r.NETWORK_ERR]="NETWORK_ERR",r.Messages[r.ABORT_ERR]="ABORT_ERR",r.Messages[r.URL_MISMATCH_ERR]="URL_MISMATCH_ERR",r.Messages[r.QUOTA_EXCEEDED_ERR]="QUOTA_EXCEEDED_ERR",r.Messages[r.TIMEOUT_ERR]="TIMEOUT_ERR",r.Messages[r.INVALID_NODE_TYPE_ERR]="INVALID_NODE_TYPE_ERR",r.Messages[r.DATA_CLONE_ERR]="DATA_CLONE_ERR",t.exports=r},26:function(t,e,n){function r(t,e,n){this.method=t,this.params=e||{},this.id=n||i.v1(),this.jsonrpc="2.0"}var i=n(11),o=n(1),u=n(8),a="ms";o.inherits(r,u),r.fromJSON=u.fromJSON,r.fromObject=u.fromObject,r.DEVICE_INFO=a+".device.getInfo",r.DEVICE_SHOW_PINCODE=a+".device.showPinCode",r.DEVICE_HIDE_PINCODE=a+".device.hidePinCode",r.DEVICE_CLOUD_DISCOVERY_INFO=a+".device.getCloudDiscoveryInfo",r.DEVICE_CLOUD_DISCOVERY_UPDATE=a+".device.updateCloudDiscoveryInfo",r.DEVICE_GET_PINCODE=a+".device.getPinCode",r.DEVICE_APP_LIST=a+".device.getApplicationList",r.DEVICE_APP_INFO=a+".device.getApplicationInfo",r.DEVICE_APP_LAUNCH=a+".device.launchApplication",r.DEVICE_APP_LAUNCH_CLOUD=a+".device.launchCloudApplication",r.DEVICE_APP_INSTALL=a+".device.installApplication",r.DEVICE_APP_UNINSTALL=a+".device.uninstallApplication",r.DEVICE_APP_TERMINATE=a+".device.terminateApplication",r.DEVICE_APP_CURRENT=a+".device.getCurrentApplicationInfo",r.DEVICE_CHANNEL_CREATE=a+".device.createChannel",r.DEVICE_CHANNEL_INFO=a+".device.getChannelInfo",r.CHANNEL_SEND_MESSAGE=a+".channel.sendMessage",r.CHANNEL_ON_CLIENT_MESSAGE=a+".channel.onClientMessage",r.CHANNEL_ON_CONNECT=a+".channel.onConnect",r.CHANNEL_DISCONNECT_CLIENT=a+".channel.disconnectClient",r.CHANNEL_ON_CLIENT_CONNECT=a+".channel.onClientConnect",r.CHANNEL_ON_CLIENT_DISCONNECT=a+".channel.onClientDisconnect",t.exports=r},27:function(t,e,n){function r(t,e){this.error=t,this.id=e||null,this.jsonrpc="2.0"}var i=n(1),o=n(8);i.inherits(r,o),r.fromJSON=o.fromJSON,r.fromObject=o.fromObject,t.exports=r},28:function(t,e,n){function r(t,e,n){this.method=t,this.result=e,this.id=n,this.jsonrpc="2.0"}var i=n(1),o=n(8);i.inherits(r,o),r.fromJSON=o.fromJSON,r.fromObject=o.fromObject,t.exports=r},29:function(t,e,n){t.exports=n(30)},30:function(t,e){(function(){var n=this,r=n._,i={},o=Array.prototype,u=Object.prototype,a=Function.prototype,s=o.push,c=o.slice,l=o.concat,f=u.toString,p=u.hasOwnProperty,h=o.forEach,d=o.map,g=o.reduce,v=o.reduceRight,y=o.filter,m=o.every,E=o.some,_=o.indexOf,R=o.lastIndexOf,O=Array.isArray,b=Object.keys,N=a.bind,A=function(t){return t instanceof A?t:this instanceof A?(this._wrapped=t,void 0):new A(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=A),e._=A,A.VERSION="1.4.4";var T=A.each=A.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var u in t)if(A.has(t,u)&&e.call(n,t[u],u,t)===i)return};A.map=A.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(T(t,function(t,i,o){r[r.length]=e.call(n,t,i,o)}),r)};var w="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=A.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,u){i?n=e.call(r,n,t,o,u):(n=t,i=!0)}),!i)throw new TypeError(w);return n},A.reduceRight=A.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduceRight===v)return r&&(e=A.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var u=A.keys(t);o=u.length}if(T(t,function(a,s,c){s=u?u[--o]:--o,i?n=e.call(r,n,t[s],s,c):(n=t[s],i=!0)}),!i)throw new TypeError(w);return n},A.find=A.detect=function(t,e,n){var r;return S(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},A.filter=A.select=function(t,e,n){var r=[];return null==t?r:y&&t.filter===y?t.filter(e,n):(T(t,function(t,i,o){e.call(n,t,i,o)&&(r[r.length]=t)}),r)},A.reject=function(t,e,n){return A.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},A.every=A.all=function(t,e,n){e||(e=A.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,n):(T(t,function(t,o,u){return(r=r&&e.call(n,t,o,u))?void 0:i}),!!r)};var S=A.some=A.any=function(t,e,n){e||(e=A.identity);var r=!1;return null==t?r:E&&t.some===E?t.some(e,n):(T(t,function(t,o,u){return r||(r=e.call(n,t,o,u))?i:void 0}),!!r)};A.contains=A.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):S(t,function(t){return t===e})},A.invoke=function(t,e){var n=c.call(arguments,2),r=A.isFunction(e);return A.map(t,function(t){return(r?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,function(t){return t[e]})},A.where=function(t,e,n){return A.isEmpty(e)?n?null:[]:A[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},A.findWhere=function(t,e){return A.where(t,e,!0)},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&A.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return T(t,function(t,i,o){var u=e?e.call(n,t,i,o):t;u>=r.computed&&(r={value:t,computed:u})}),r.value},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&A.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return T(t,function(t,i,o){var u=e?e.call(n,t,i,o):t;u<r.computed&&(r={value:t,computed:u})}),r.value},A.shuffle=function(t){var e,n=0,r=[];return T(t,function(t){e=A.random(n++),r[n-1]=r[e],r[e]=t}),r};var I=function(t){return A.isFunction(t)?t:function(e){return e[t]}};A.sortBy=function(t,e,n){var r=I(e);return A.pluck(A.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index<e.index?-1:1}),"value")};var C=function(t,e,n,r){var i={},o=I(e||A.identity);return T(t,function(e,u){var a=o.call(n,e,u,t);r(i,a,e)}),i};A.groupBy=function(t,e,n){return C(t,e,n,function(t,e,n){(A.has(t,e)?t[e]:t[e]=[]).push(n)})},A.countBy=function(t,e,n){return C(t,e,n,function(t,e){A.has(t,e)||(t[e]=0),t[e]++})},A.sortedIndex=function(t,e,n,r){n=null==n?A.identity:I(n);for(var i=n.call(r,e),o=0,u=t.length;u>o;){var a=o+u>>>1;n.call(r,t[a])<i?o=a+1:u=a}return o},A.toArray=function(t){return t?A.isArray(t)?c.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:c.call(t,0,e)},A.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var x=function(t,e,n){return T(t,function(t){A.isArray(t)?e?s.apply(n,t):x(t,e,n):n.push(t)}),n};A.flatten=function(t,e){return x(t,e,[])},A.without=function(t){return A.difference(t,c.call(arguments,1))},A.uniq=A.unique=function(t,e,n,r){A.isFunction(e)&&(r=n,n=e,e=!1);var i=n?A.map(t,n,r):t,o=[],u=[];return T(i,function(n,r){(e?r&&u[u.length-1]===n:A.contains(u,n))||(u.push(n),o.push(t[r]))}),o},A.union=function(){return A.uniq(l.apply(o,arguments))},A.intersection=function(t){var e=c.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.indexOf(e,t)>=0})})},A.difference=function(t){var e=l.apply(o,c.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=c.call(arguments),e=A.max(A.pluck(t,"length")),n=new Array(e),r=0;e>r;r++)n[r]=A.pluck(t,""+r);return n},A.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=A.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(R&&t.lastIndexOf===R)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o},A.bind=function(t,e){if(t.bind===N&&N)return N.apply(t,c.call(arguments,1));var n=c.call(arguments,2);return function(){return t.apply(e,n.concat(c.call(arguments)))}},A.partial=function(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}},A.bindAll=function(t){var e=c.call(arguments,1);return 0===e.length&&(e=A.functions(t)),T(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var r=e.apply(this,arguments);return A.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},A.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(c.call(arguments,1)))},A.throttle=function(t,e){var n,r,i,o,u=0,a=function(){u=new Date,i=null,o=t.apply(n,r)};return function(){var s=new Date,c=e-(s-u);return n=this,r=arguments,0>=c?(clearTimeout(i),i=null,u=s,o=t.apply(n,r)):i||(i=setTimeout(a,c)),o}},A.debounce=function(t,e,n){var r,i;return function(){var o=this,u=arguments,a=function(){r=null,n||(i=t.apply(o,u))},s=n&&!r;return clearTimeout(r),r=setTimeout(a,e),s&&(i=t.apply(o,u)),i}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)A.has(t,n)&&(e[e.length]=n);return e},A.values=function(t){var e=[];for(var n in t)A.has(t,n)&&e.push(t[n]);return e},A.pairs=function(t){var e=[];for(var n in t)A.has(t,n)&&e.push([n,t[n]]);return e},A.invert=function(t){var e={};for(var n in t)A.has(t,n)&&(e[t[n]]=n);return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return T(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=l.apply(o,c.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=l.apply(o,c.call(arguments,1));for(var r in t)A.contains(n,r)||(e[r]=t[r]);return e},A.defaults=function(t){return T(c.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t};var j=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var i=f.call(t);if(i!=f.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;n.push(t),r.push(e);var u=0,a=!0;if("[object Array]"==i){if(u=t.length,a=u==e.length)for(;u--&&(a=j(t[u],e[u],n,r)););}else{var s=t.constructor,c=e.constructor;if(s!==c&&!(A.isFunction(s)&&s instanceof s&&A.isFunction(c)&&c instanceof c))return!1;for(var l in t)if(A.has(t,l)&&(u++,!(a=A.has(e,l)&&j(t[l],e[l],n,r))))break;if(a){for(l in e)if(A.has(e,l)&&!u--)break;a=!u}}return n.pop(),r.pop(),a};A.isEqual=function(t,e){return j(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=O||function(t){return"[object Array]"==f.call(t)},A.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),A.isFunction=function(t){return"function"==typeof t},A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)
},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return p.call(t,e)},A.noConflict=function(){return n._=r,this},A.identity=function(t){return t},A.times=function(t,e,n){for(var r=Array(t),i=0;t>i;i++)r[i]=e.call(n,i);return r},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=A.invert(D.escape);var M={escape:new RegExp("["+A.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(D.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace(M[t],function(e){return D[t][e]})}}),A.result=function(t,e){if(null==t)return null;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){T(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),k.call(this,n.apply(A,t))}})};var L=0;A.uniqueId=function(t){var e=++L+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var r;n=A.defaults({},n,A.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(i,function(e,n,r,i,a){return u+=t.slice(o,a).replace(U,function(t){return"\\"+F[t]}),n&&(u+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(u+="';\n"+i+"\n__p+='"),o=a+e.length,e}),u+="';\n",n.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{r=new Function(n.variable||"obj","_",u)}catch(a){throw a.source=u,a}if(e)return r(e,A);var s=function(t){return r.call(this,t,A)};return s.source="function("+(n.variable||"obj")+"){\n"+u+"}",s},A.chain=function(t){return A(t).chain()};var k=function(t){return this._chain?A(t).chain():t};A.mixin(A),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],k.call(this,n)}}),T(["concat","join","slice"],function(t){var e=o[t];A.prototype[t]=function(){return k.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},31:function(t){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}},32:function(t){t.exports=function(t){return t instanceof RegExp||"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}},33:function(t){t.exports=Object.create||function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,n=new r,n.__proto__=t}return"undefined"!=typeof e&&Object.defineProperties&&Object.defineProperties(n,e),n}},34:function(t){t.exports=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.hasOwnProperty.call(t,n)&&e.push(n);return e}},35:function(t){t.exports=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},36:function(t,e,n){function r(t,e){if("function"!=typeof e)throw new Error("Bad callback given: "+e);if(!t)throw new Error("No options given");var n=t.onResponse;if(t="string"==typeof t?{uri:t}:JSON.parse(JSON.stringify(t)),t.onResponse=n,t.url&&(t.uri=t.url,delete t.url),!t.uri&&""!==t.uri)throw new Error("options.uri is a required argument");if("string"!=typeof t.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],a=0;a<u.length;a++)if(t[u[a]])throw new Error("options."+u[a]+" is not supported");if(t.callback=e,t.method=t.method||"GET",t.headers=t.headers||{},t.body=t.body||null,t.timeout=t.timeout||r.DEFAULT_TIMEOUT,t.headers.host)throw new Error("Options.headers.host is not supported");return t.json&&(t.headers.accept=t.headers.accept||"application/json","GET"!==t.method&&(t.headers["content-type"]="application/json"),"boolean"!=typeof t.json?t.body=JSON.stringify(t.json):"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.onResponse=t.onResponse||o,t.onResponse===!0&&(t.onResponse=e,t.callback=o),!t.headers.authorization&&t.auth&&(t.headers.authorization="Basic "+s(t.auth.username+":"+t.auth.password)),i(t)}function i(t){function e(){c=!0;var e=new Error("ETIMEDOUT");return e.code="ETIMEDOUT",e.duration=t.timeout,r.log.error("Timeout",{id:s._id,milliseconds:t.timeout}),t.callback(e,s)}function n(){if(c)return r.log.debug("Ignoring timed out state change",{state:s.readyState,id:s.id});if(r.log.debug("State change",{state:s.readyState,id:s.id,timed_out:c}),s.readyState===l.OPENED){r.log.debug("Request started",{id:s.id});for(var e in t.headers)s.setRequestHeader(e,t.headers[e])}else s.readyState===l.HEADERS_RECEIVED?i():s.readyState===l.LOADING?(i(),o()):s.readyState===l.DONE&&(i(),o(),u())}function i(){if(!g.response){if(g.response=!0,r.log.debug("Got response",{id:s.id,status:s.status}),clearTimeout(s.timeoutTimer),s.statusCode=s.status,f&&0==s.statusCode){var e=new Error("CORS request rejected: "+t.uri);return e.cors="rejected",g.loading=!0,g.end=!0,t.callback(e,s)}t.onResponse(null,s)}}function o(){g.loading||(g.loading=!0,r.log.debug("Response body loading",{id:s.id}))}function u(){if(!g.end){if(g.end=!0,r.log.debug("Request done",{id:s.id}),s.body=s.responseText,t.json)try{s.body=JSON.parse(s.responseText)}catch(e){return t.callback(e,s)}t.callback(null,s,s.body)}}var s=new l,c=!1,f=a(t.uri),h="withCredentials"in s._object;if(p+=1,s.seq_id=p,s.id=p+": "+t.method+" "+t.uri,s._id=s.id,f&&!h){var d=new Error("Browser does not support cross-origin request: "+t.uri);return d.cors="unsupported",t.callback(d,s)}s.timeoutTimer=setTimeout(e,t.timeout);var g={response:!1,loading:!1,end:!1};return s.onreadystatechange=n,s.open(t.method,t.uri,!0),f&&(s._object.withCredentials=!!t.withCredentials),s.send(t.body),s}function o(){}function u(){var t,e,n={},r=["trace","debug","info","warn","error"];for(e=0;e<r.length;e++)t=r[e],n[t]=o;return n}function a(t){var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(r){e=document.createElement("a"),e.href="",e=e.href}var i=n.exec(e.toLowerCase())||[],o=n.exec(t.toLowerCase()),u=!(!o||o[1]==i[1]&&o[2]==i[2]&&(o[3]||("http:"===o[1]?80:443))==(i[3]||("http:"===i[1]?80:443)));return u}function s(t){var e,n,r,i,o,u,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,p="",h=[];if(!t)return t;do e=t.charCodeAt(l++),n=t.charCodeAt(l++),r=t.charCodeAt(l++),s=e<<16|n<<8|r,i=s>>18&63,o=s>>12&63,u=s>>6&63,a=63&s,h[f++]=c.charAt(i)+c.charAt(o)+c.charAt(u)+c.charAt(a);while(l<t.length);switch(p=h.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}var c=n(38);if(!c||"object"!=typeof c)throw new Error("Could not find ./xmlhttprequest");var l=c.XMLHttpRequest;if(!l)throw new Error("Bad xmlhttprequest.XMLHttpRequest");if(!("_object"in new l))throw new Error("This is not portable XMLHttpRequest");t.exports=r,r.XMLHttpRequest=l,r.log=u();var f=18e4,p=0;r.withCredentials=!1,r.DEFAULT_TIMEOUT=f;var h=["get","put","post","head","delete"];h.forEach(function(t){var e=t.toUpperCase(),n=t.toLowerCase();r[n]=function(t){"string"==typeof t?t={method:e,uri:t}:(t=JSON.parse(JSON.stringify(t)),t.method=e);var n=[t].concat(Array.prototype.slice.apply(arguments,[1]));return r.apply(this,n)}}),r.couch=function(t,e){function n(t,n,r){if(t)return e(t,n,r);if((n.statusCode<200||n.statusCode>299)&&r.error){t=new Error("CouchDB error: "+(r.error.reason||r.error.error));for(var i in r)t[i]=r[i];return e(t,n,r)}return e(t,n,r)}"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,e=e||o;var i=r(t,n);return i}},37:function(t){!function(){function e(){this._object=a&&!l?new a:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function n(){return new e}function r(t){if(t._object.send(t._data),s&&!t._async)for(t.readyState=n.OPENED,u(t);t.readyState<n.DONE;)if(t.readyState++,i(t),t._aborted)return}function i(t){n.onreadystatechange&&n.onreadystatechange.apply(t),t.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function o(t){var e=t.responseXML,n=t.responseText;return c&&n&&e&&!e.documentElement&&t.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.validateOnParse=!1,e.loadXML(n)),e&&(c&&0!==e.parseError||!e.documentElement||e.documentElement&&"parsererror"==e.documentElement.tagName)?null:e}function u(t){try{t.responseText=t._object.responseText}catch(e){}try{t.responseXML=o(t._object)}catch(e){}try{t.status=t._object.status}catch(e){}try{t.statusText=t._object.statusText}catch(e){}}var a=window.XMLHttpRequest,s=!!window.controllers,c=!!window.document.namespaces,l=c&&window.navigator.userAgent.match(/MSIE 7.0/);n.prototype=e.prototype,s&&a.wrapped&&(n.wrapped=a.wrapped),n.UNSENT=0,n.OPENED=1,n.HEADERS_RECEIVED=2,n.LOADING=3,n.DONE=4,n.prototype.UNSENT=n.UNSENT,n.prototype.OPENED=n.OPENED,n.prototype.HEADERS_RECEIVED=n.HEADERS_RECEIVED,n.prototype.LOADING=n.LOADING,n.prototype.DONE=n.DONE,n.prototype.readyState=n.UNSENT,n.prototype.responseText="",n.prototype.responseXML=null,n.prototype.status=0,n.prototype.statusText="",n.prototype.priority="NORMAL",n.prototype.onreadystatechange=null,n.onreadystatechange=null,n.onopen=null,n.onsend=null,n.onabort=null,n.prototype.open=function(t,e,r,o,a){var l=t.toLowerCase();if("connect"==l||"trace"==l||"track"==l)throw new Error(18);delete this._headers,arguments.length<3&&(r=!0),this._async=r;var f=this,p=this.readyState,h=null;c&&r&&(h=function(){p!=n.DONE&&f.abort()},window.attachEvent("onunload",h)),n.onopen&&n.onopen.apply(this,arguments),arguments.length>4?this._object.open(t,e,r,o,a):arguments.length>3?this._object.open(t,e,r,o):this._object.open(t,e,r),this.readyState=n.OPENED,i(this),this._object.onreadystatechange=function(){return!s||r?(f.readyState=f._object.readyState,u(f),f._aborted?(f.readyState=n.UNSENT,void 0):(f.readyState==n.DONE&&(delete f._data,p!=f.readyState&&i(f),p=f.readyState),void 0)):void 0}},n.prototype.send=function(t){n.onsend&&n.onsend.apply(this,arguments),arguments.length||(t=null),t&&t.nodeType&&(t=window.XMLSerializer?(new window.XMLSerializer).serializeToString(t):t.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=t,r(this)},n.prototype.abort=function(){n.onabort&&n.onabort.apply(this,arguments),this.readyState>n.UNSENT&&(this._aborted=!0),this._object.abort(),this.readyState=n.UNSENT,delete this._data},n.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},n.prototype.getResponseHeader=function(t){return this._object.getResponseHeader(t)},n.prototype.setRequestHeader=function(t,e){return this._headers||(this._headers={}),this._headers[t]=e,this._object.setRequestHeader(t,e)},n.prototype.addEventListener=function(t,e,n){for(var r,i=0;r=this._listeners[i];i++)if(r[0]==t&&r[1]==e&&r[2]==n)return;this._listeners.push([t,e,n])},n.prototype.removeEventListener=function(t,e,n){for(var r,i=0;(r=this._listeners[i])&&(r[0]!=t||r[1]!=e||r[2]!=n);i++);r&&this._listeners.splice(i,1)},n.prototype.dispatchEvent=function(t){var e={type:t.type,target:this,currentTarget:this,eventPhase:2,bubbles:t.bubbles,cancelable:t.cancelable,timeStamp:t.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};"readystatechange"==e.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[e]);for(var n,r=0;n=this._listeners[r];r++)n[0]!=e.type||n[2]||(n[1].handleEvent||n[1]).apply(this,[e])},n.prototype.toString=function(){return"[object XMLHttpRequest]"},n.toString=function(){return"[XMLHttpRequest]"},t.exports.XMLHttpRequest=n}()},38:function(t,e,n){var r=n(37);t.exports=r},39:function(t,e,n){function r(t,e,n){s.assertArgs(arguments,[s.O,s.S]),r.super_.call(this),this._device=t,this._runTitle=e,this._installURL=null,this._lastKnownStatus=this.parseStatus(n)}{var i=n(1),o=n(2).events.EventEmitter,u=n(2).errors.MultiScreenError,a=(n(17),n(5)),s=(n(4),n(3)),c=n(6);n(13)}i.inherits(r,o),Object.defineProperty(r.prototype,"runTitle",{get:function(){return this._runTitle}}),Object.defineProperty(r.prototype,"lastKnownStatus",{get:function(){return this._lastKnownStatus||r.STATUS_STOPPED}}),Object.defineProperty(r.prototype,"uri",{get:function(){return this._device.dialURI+this.runTitle}}),r.prototype.parseStatus=function(t){return t&&"string"==typeof t?0===t.indexOf("installable=")?(this._installURL=t.replace("installable=",""),r.STATUS_INSTALLABLE):t:null},r.prototype.updateStatus=function(t,e){var n=this;c.get({url:this.uri},function(r,i,o){var s=r||(o.error?new u(o.error.code):null)||(i.status>=400?new u(u.ABORT_ERR):null);if(s)return a.isFunction(e)&&e(s),void 0;var c=i.responseText,l=new DOMParser,f=l.parseFromString(c,"text/xml"),p=f.getElementsByTagName("state")[0].childNodes[0].nodeValue;n._lastKnownStatus=n.parseStatus(p),t(n._lastKnownStatus)})},r.prototype.launch=function(t,e,n){t?s.assertArgs(arguments,[s.O]):t={};var r={url:this.uri,body:encodeURIComponent(JSON.stringify(t)),headers:{"content-type":"text/plain"}};c.post(r,function(t,r,i){var o=t||(i.error?new u(i.error.code):null)||(r.status>=400?new u(u.ABORT_ERR):null);return o?(a.isFunction(n)&&n(o),void 0):(e(),void 0)})},r.prototype.terminate=function(t,e){var n=this.uri+"/run";c({url:n,method:"DELETE"},function(n,r,i){var o=n||(i.error?new u(i.error.code):null)||(r.status>=400?new u(u.ABORT_ERR):null);return o?(a.isFunction(e)&&e(o),void 0):(t(),void 0)})},r.prototype.install=function(t,e){if(!this._installURL)throw new u(u.NOT_SUPPORTED_ERR,"This application cannot be installed. Please it is installable");c({url:this._installURL},function(n,r){var i=r.status>=400?new u(u.ABORT_ERR):null;return i?(a.isFunction(e)&&e(i),void 0):(t(),void 0)})},r.STATUS_RUNNING="running",r.STATUS_STOPPED="stopped",r.STATUS_INSTALLABLE="installable",t.exports=r},40:function(t,e,n){function r(){c.assertArgs(arguments,[c.O]),r.super_.apply(this,arguments)}var i=n(1),o=n(2).errors.MultiScreenError,u=(n(2).rpc.JSONMessage,n(5)),a=n(13),s=n(17),c=n(3),l=n(6),f=n(4),p=n(39);i.inherits(r,s),s.prototype.getApplication=function(t,e,n){c.assertArgs(arguments,[c.S,c.F]);var r=this,i=this.dialURI+t;l.get({url:i},function(i,a,s){var c=i||(s.error?new o(s.error.code):null)||(a.status>=400?new o(o.ABORT_ERR):null);if(c)return u.isFunction(n)&&n(c),void 0;var l=a.responseText,f=new DOMParser,h=f.parseFromString(l,"text/xml"),d=h.getElementsByTagName("state")[0].childNodes[0].nodeValue,g=new p(r,t,d);e(g)})},r.prototype.connectToChannel=function(t,e,n,r){c.assertArgs(arguments,[c.S,c.O,c.F]),e=e||{};var i=function(t){t.connect(e,function(){n(t)},r)};a.get(this.serviceURI,t,i,r)},r.search=function(t,e){c.assertArgs(arguments,[c.F]);var n=f.cloudServiceURL+f.cloudDiscoveryPath+"?ip=local";l.get({url:n,json:!0},function(n,i,a){var s=n||(a.error?new o(a.error.code):null)||(i.status>=400?new o(o.ABORT_ERR):null);if(s)return u.isFunction(e)&&e(s),void 0;var c=[];console.log(a),a.forEach(function(t){if(t.Capabilities){var e=u.findWhere(t.Capabilities,{name:f.apiCapability});e&&r.getDevice(t.ServiceURI,function(t){c.push(t)})}}),setTimeout(function(){t(c)},4e3)})},r.findByCode=function(t,e,n){c.assertArgs(arguments,[c.S,c.F]);var i=f.cloudServiceURL+f.cloudDiscoveryPath+"?code="+t;l.get({url:i,json:!0},function(t,i,a){var s=t||(a.error?new o(a.error.code):null)||(i.status>=400?new o(o.ABORT_ERR):null);if(!s&&a&&a.Capabilities&&a.Capabilities){var c=u.findWhere(a.Capabilities,{name:f.apiCapability});if(c){var l=new r(a);return e(l),void 0}s=new o(o.NOT_SUPPORTED_ERR,"The device does not support this API version")}else s=new o(o.NOT_SUPPORTED_ERR,"The device does not support the API");s&&u.isFunction(n)&&n(s)})},r.getDevice=s.getDevice,t.exports=r}});